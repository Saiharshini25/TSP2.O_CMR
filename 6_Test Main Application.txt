/*
Test the application: Finally, its time to perform the CRUD application using all the methods of EmployeeDaoImplementation. 
Create a class Application in com.jdbc.main package.
*/

//Source Code

package com.jdbc.main;

import java.sql.SQLException;
import java.util.List;

import com.jdbc.dao.EmployeeDaoImplementation;
import com.jdbc.model.Employee;

public class DaoMain {

    public static void main(String[] args) {

        EmployeeDao employeeDao = new EmployeeDaoImplementation();

        // Adding employees
        try {
            Employee emp1 = new Employee("Ragavan", "Tamilnadu");
            Employee emp2 = new Employee("VPR", "Kerala");

            employeeDao.add(emp1);
            employeeDao.add(emp2);

            System.out.println("Employees added successfully!");
        } catch (SQLException e) {
            e.printStackTrace();
        }

        // Getting all employees
        try {
            List<Employee> employees = employeeDao.getEmployees();
            System.out.println("All Employees:");
            for (Employee emp : employees) {
                System.out.println(emp);
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }

        // Updating an employee
        try {
            Employee empToUpdate = employeeDao.getEmployee(1);
            if (empToUpdate != null) {
                empToUpdate.setEmp_name("Updated Name");
                empToUpdate.setEmp_address("Updated Address");
                employeeDao.update(empToUpdate);
                System.out.println("Employee updated successfully!");
            } else {
                System.out.println("Employee with ID 1 not found!");
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }

        // Getting a specific employee
        try {
            Employee retrievedEmployee = employeeDao.getEmployee(1);
            if (retrievedEmployee != null) {
                System.out.println("Retrieved Employee: " + retrievedEmployee);
            } else {
                System.out.println("Employee with ID 1 not found!");
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }

        // Deleting an employee
        try {
            int employeeIdToDelete = 2;
            employeeDao.delete(employeeIdToDelete);
            System.out.println("Employee with ID " + employeeIdToDelete + " deleted successfully!");
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
}
